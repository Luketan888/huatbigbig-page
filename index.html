<script>
document.getElementById('claimForm').addEventListener('submit', function(event) {
    event.preventDefault();

    // Get the form data values
    const name = document.getElementById('name').value;
    const sex = document.getElementById('sex').value;
    const age = document.getElementById('age').value;
    const email = document.getElementById('email').value;
    const message = document.getElementById('message').value;

    // GitHub API URL for triggering the Action
    const githubAPIURL = 'https://api.github.com/repos/YOUR_GITHUB_USERNAME/YOUR_REPOSITORY_NAME/dispatches';  // Replace with your repository's URL

    // Create a data object to send to GitHub Action
    const formData = {
        name: name,
        sex: sex,
        age: age,
        email: email,
        message: message,
    };

    // Send the form data to GitHub Actions
    fetch(githubAPIURL, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': `token ${process.env.PERSONAL_ACCESS_TOKEN}`,  // Use GitHub Secrets for token
        },
        body: JSON.stringify({
            event_type: 'send-telegram-message',
            client_payload: formData
        })
    })
    .then(response => response.json())
    .then(data => {
        // Handle success or failure response from GitHub Action
        if (data.status === 'success') {
            document.getElementById('confirmationMessage').textContent = "Your claim has been submitted successfully!";
            document.getElementById('claimForm').reset(); // Clear the form after submission
        } else {
            document.getElementById('confirmationMessage').textContent = "Error: Unable to send the message.";
        }
    })
    .catch(error => {
        document.getElementById('confirmationMessage').textContent = "Error: Unable to connect to the server.";
    });
});
</script>
